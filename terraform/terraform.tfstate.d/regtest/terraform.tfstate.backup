{
  "version": 4,
  "terraform_version": "0.12.5",
  "serial": 50,
  "lineage": "1aff4d58-8e5d-23df-a071-1f3f6ef7fc2d",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "aws_acm_certificate",
      "name": "api",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:acm:us-east-1:234360968295:certificate/0440f92b-1a12-4be9-9400-22e3a62bd69c",
            "domain": "regtest.bytabit.net",
            "id": "2019-08-04 00:15:12.340812 +0000 UTC",
            "key_types": null,
            "most_recent": false,
            "statuses": [
              "ISSUED"
            ],
            "types": null
          }
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_route53_zone",
      "name": "root_domain",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "caller_reference": "36B946D4-4910-14AC-9191-175C2E457C65",
            "comment": "",
            "id": "Z2QM7I2QKXPJ12",
            "linked_service_description": null,
            "linked_service_principal": null,
            "name": "bytabit.net.",
            "name_servers": [
              "ns-719.awsdns-25.net",
              "ns-1031.awsdns-00.org",
              "ns-238.awsdns-29.com",
              "ns-1943.awsdns-50.co.uk"
            ],
            "private_zone": false,
            "resource_record_set_count": 3,
            "tags": null,
            "vpc_id": null,
            "zone_id": "Z2QM7I2QKXPJ12"
          }
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_base_path_mapping",
      "name": "api",
      "provider": "provider.aws",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_deployment",
      "name": "bytabit",
      "provider": "provider.aws",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_domain_name",
      "name": "api",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "certificate_arn": "arn:aws:acm:us-east-1:234360968295:certificate/0440f92b-1a12-4be9-9400-22e3a62bd69c",
            "certificate_body": null,
            "certificate_chain": null,
            "certificate_name": "",
            "certificate_private_key": null,
            "certificate_upload_date": "2019-08-04T00:15:21Z",
            "cloudfront_domain_name": "dh8oa7x790qyw.cloudfront.net",
            "cloudfront_zone_id": "Z2FDTNDATAQYW2",
            "domain_name": "regtest.bytabit.net",
            "endpoint_configuration": [
              {
                "types": [
                  "EDGE"
                ]
              }
            ],
            "id": "regtest.bytabit.net",
            "regional_certificate_arn": "",
            "regional_certificate_name": "",
            "regional_domain_name": "",
            "regional_zone_id": "",
            "security_policy": "TLS_1_0"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "data.aws_acm_certificate.api"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_integration",
      "name": "get_badge",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cache_key_parameters": null,
            "cache_namespace": "y5w9no",
            "connection_id": "",
            "connection_type": "INTERNET",
            "content_handling": "",
            "credentials": "",
            "http_method": "GET",
            "id": "agi-692d4o9vjf-y5w9no-GET",
            "integration_http_method": "POST",
            "passthrough_behavior": "WHEN_NO_MATCH",
            "request_parameters": null,
            "request_parameters_in_json": null,
            "request_templates": null,
            "resource_id": "y5w9no",
            "rest_api_id": "692d4o9vjf",
            "timeout_milliseconds": 29000,
            "type": "AWS_PROXY",
            "uri": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:234360968295:function:regtest_get_badge/invocations"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_api_gateway_method.get_badge",
            "aws_api_gateway_rest_api.bytabit",
            "aws_lambda_function.get_badge"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_integration",
      "name": "get_version",
      "provider": "provider.aws",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_integration",
      "name": "put_badge",
      "provider": "provider.aws",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_integration",
      "name": "put_offer",
      "provider": "provider.aws",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_method",
      "name": "get_badge",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_key_required": false,
            "authorization": "NONE",
            "authorization_scopes": null,
            "authorizer_id": null,
            "http_method": "GET",
            "id": "agm-692d4o9vjf-y5w9no-GET",
            "request_models": null,
            "request_parameters": null,
            "request_parameters_in_json": null,
            "request_validator_id": null,
            "resource_id": "y5w9no",
            "rest_api_id": "692d4o9vjf"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_api_gateway_resource.badge_profilepubkey",
            "aws_api_gateway_rest_api.bytabit"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_method",
      "name": "get_version",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_key_required": false,
            "authorization": "NONE",
            "authorization_scopes": null,
            "authorizer_id": null,
            "http_method": "GET",
            "id": "agm-692d4o9vjf-st9f80-GET",
            "request_models": null,
            "request_parameters": null,
            "request_parameters_in_json": null,
            "request_validator_id": null,
            "resource_id": "st9f80",
            "rest_api_id": "692d4o9vjf"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_api_gateway_resource.version",
            "aws_api_gateway_rest_api.bytabit"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_method",
      "name": "put_badge",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_key_required": false,
            "authorization": "NONE",
            "authorization_scopes": null,
            "authorizer_id": null,
            "http_method": "PUT",
            "id": "agm-692d4o9vjf-61ic4h-PUT",
            "request_models": null,
            "request_parameters": null,
            "request_parameters_in_json": null,
            "request_validator_id": null,
            "resource_id": "61ic4h",
            "rest_api_id": "692d4o9vjf"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_api_gateway_resource.badge_id",
            "aws_api_gateway_rest_api.bytabit"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_method",
      "name": "put_offer",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_key_required": false,
            "authorization": "NONE",
            "authorization_scopes": null,
            "authorizer_id": null,
            "http_method": "PUT",
            "id": "agm-692d4o9vjf-51xe0u-PUT",
            "request_models": null,
            "request_parameters": null,
            "request_parameters_in_json": null,
            "request_validator_id": null,
            "resource_id": "51xe0u",
            "rest_api_id": "692d4o9vjf"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_api_gateway_resource.offer_id",
            "aws_api_gateway_rest_api.bytabit"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_resource",
      "name": "badge_id",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "61ic4h",
            "parent_id": "y5w9no",
            "path": "/badges/{profilePubKey}/{id}",
            "path_part": "{id}",
            "rest_api_id": "692d4o9vjf"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_api_gateway_resource.badge_profilepubkey",
            "aws_api_gateway_rest_api.bytabit"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_resource",
      "name": "badge_profilepubkey",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "y5w9no",
            "parent_id": "up8e5m",
            "path": "/badges/{profilePubKey}",
            "path_part": "{profilePubKey}",
            "rest_api_id": "692d4o9vjf"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_api_gateway_resource.badges",
            "aws_api_gateway_rest_api.bytabit"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_resource",
      "name": "badges",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "up8e5m",
            "parent_id": "egs30gz9s1",
            "path": "/badges",
            "path_part": "badges",
            "rest_api_id": "692d4o9vjf"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_api_gateway_rest_api.bytabit"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_resource",
      "name": "offer_id",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "51xe0u",
            "parent_id": "cchml4",
            "path": "/offers/{id}",
            "path_part": "{id}",
            "rest_api_id": "692d4o9vjf"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_api_gateway_resource.offers",
            "aws_api_gateway_rest_api.bytabit"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_resource",
      "name": "offers",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "cchml4",
            "parent_id": "egs30gz9s1",
            "path": "/offers",
            "path_part": "offers",
            "rest_api_id": "692d4o9vjf"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_api_gateway_rest_api.bytabit"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_resource",
      "name": "version",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "st9f80",
            "parent_id": "egs30gz9s1",
            "path": "/version",
            "path_part": "version",
            "rest_api_id": "692d4o9vjf"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_api_gateway_rest_api.bytabit"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_rest_api",
      "name": "bytabit",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_key_source": "HEADER",
            "binary_media_types": null,
            "body": null,
            "created_date": "2019-08-04T00:15:19Z",
            "description": "Bytabit Serverless APIs",
            "endpoint_configuration": [
              {
                "types": [
                  "EDGE"
                ]
              }
            ],
            "execution_arn": "arn:aws:execute-api:us-east-1:234360968295:692d4o9vjf",
            "id": "692d4o9vjf",
            "minimum_compression_size": -1,
            "name": "regtest_bytabit_serverless",
            "policy": "",
            "root_resource_id": "egs30gz9s1"
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "get_badge",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:234360968295:log-group:/aws/lambda/regtest_get_badge:*",
            "id": "/aws/lambda/regtest_get_badge",
            "kms_key_id": "",
            "name": "/aws/lambda/regtest_get_badge",
            "name_prefix": null,
            "retention_in_days": 30,
            "tags": {
              "Stage": "regtest"
            }
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "badge",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:us-east-1:234360968295:table/regtest_badge",
            "attribute": [
              {
                "name": "id",
                "type": "S"
              },
              {
                "name": "profilePubKey",
                "type": "S"
              }
            ],
            "billing_mode": "PROVISIONED",
            "global_secondary_index": [],
            "hash_key": "profilePubKey",
            "id": "regtest_badge",
            "local_secondary_index": [],
            "name": "regtest_badge",
            "point_in_time_recovery": [
              {
                "enabled": false
              }
            ],
            "range_key": "id",
            "read_capacity": 1,
            "server_side_encryption": [],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "tags": {
              "Name": "badge",
              "Stage": "regtest"
            },
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "",
                "enabled": false
              }
            ],
            "write_capacity": 1
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjM2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "offer",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:us-east-1:234360968295:table/regtest_offer",
            "attribute": [
              {
                "name": "id",
                "type": "S"
              }
            ],
            "billing_mode": "PROVISIONED",
            "global_secondary_index": [],
            "hash_key": "id",
            "id": "regtest_offer",
            "local_secondary_index": [],
            "name": "regtest_offer",
            "point_in_time_recovery": [
              {
                "enabled": false
              }
            ],
            "range_key": null,
            "read_capacity": 1,
            "server_side_encryption": [],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "tags": {
              "Name": "offer",
              "Stage": "regtest"
            },
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "",
                "enabled": false
              }
            ],
            "write_capacity": 1
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjM2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "lambda_exec",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::234360968295:role/regtest_lambda_exec",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2019-08-04T00:15:19Z",
            "description": "",
            "force_detach_policies": false,
            "id": "regtest_lambda_exec",
            "max_session_duration": 3600,
            "name": "regtest_lambda_exec",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": null,
            "unique_id": "AROATNEIASRT3TIUAQJ2W"
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "lambda_dynamo",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "regtest_lambda_exec:regtest_lambda_dynamo",
            "name": "regtest_lambda_dynamo",
            "name_prefix": null,
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n        {\n            \"Action\": [\n                \"dynamodb:*\"\n            ],\n            \"Effect\": \"Allow\",\n            \"Resource\": [\n              \"arn:aws:dynamodb:us-east-1:234360968295:table/regtest_badge\",\n              \"arn:aws:dynamodb:us-east-1:234360968295:table/regtest_offer\"\n            ]\n        }\n    ]\n}\n",
            "role": "regtest_lambda_exec"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_dynamodb_table.badge",
            "aws_dynamodb_table.offer",
            "aws_iam_role.lambda_exec"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "lambda_logging",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "regtest_lambda_exec:regtest_lambda_logging",
            "name": "regtest_lambda_logging",
            "name_prefix": null,
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n        {\n            \"Action\": [\n                \"logs:CreateLogGroup\",\n                 \"logs:CreateLogStream\",\n                 \"logs:PutLogEvents\"\n            ],\n            \"Effect\": \"Allow\",\n            \"Resource\": \"arn:aws:logs:*:*:*\"\n        }\n    ]\n}\n",
            "role": "regtest_lambda_exec"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_iam_role.lambda_exec"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "get_badge",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:us-east-1:234360968295:function:regtest_get_badge",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "BADGE_TABLE": "regtest_badge"
                }
              }
            ],
            "filename": null,
            "function_name": "regtest_get_badge",
            "handler": "com.bytabit.serverless.badge.GetBadgeHandler",
            "id": "regtest_get_badge",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:234360968295:function:regtest_get_badge/invocations",
            "kms_key_arn": "",
            "last_modified": "2019-08-04T00:15:31.253+0000",
            "layers": null,
            "memory_size": 256,
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:234360968295:function:regtest_get_badge:$LATEST",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::234360968295:role/regtest_lambda_exec",
            "runtime": "java8",
            "s3_bucket": "bytabit-serverless",
            "s3_key": "v0.4.0/bytabit-serverless.zip",
            "s3_object_version": null,
            "source_code_hash": "m1W8J5k1n+Wma9DTedg/ZMu+U2UyzRSvfLgU8puQ84M=",
            "source_code_size": 9782268,
            "tags": null,
            "timeout": 10,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "depends_on": [
            "aws_cloudwatch_log_group.get_badge",
            "aws_dynamodb_table.badge",
            "aws_iam_role.lambda_exec",
            "aws_iam_role_policy.lambda_dynamo",
            "aws_iam_role_policy.lambda_logging"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "get_version",
      "provider": "provider.aws",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "put_badge",
      "provider": "provider.aws",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "put_offer",
      "provider": "provider.aws",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "get_badge",
      "provider": "provider.aws",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "get_version",
      "provider": "provider.aws",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "put_badge",
      "provider": "provider.aws",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "put_offer",
      "provider": "provider.aws",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_route53_record",
      "name": "sub_domain",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "alias": [
              {
                "evaluate_target_health": false,
                "name": "dh8oa7x790qyw.cloudfront.net",
                "zone_id": "Z2FDTNDATAQYW2"
              }
            ],
            "allow_overwrite": null,
            "failover_routing_policy": [],
            "fqdn": "regtest.bytabit.net",
            "geolocation_routing_policy": [],
            "health_check_id": null,
            "id": "Z2QM7I2QKXPJ12_regtest.bytabit.net_A",
            "latency_routing_policy": [],
            "multivalue_answer_routing_policy": null,
            "name": "regtest.bytabit.net",
            "records": null,
            "set_identifier": null,
            "ttl": null,
            "type": "A",
            "weighted_routing_policy": [],
            "zone_id": "Z2QM7I2QKXPJ12"
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "depends_on": [
            "aws_api_gateway_domain_name.api",
            "data.aws_route53_zone.root_domain"
          ]
        }
      ]
    }
  ]
}
